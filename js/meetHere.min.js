$(".modal").each(function(){$(this).wrap('<div class="overlay"></div>')}),$("#open-modal, #open-modal-1").on("touchend || click",function(e){e.preventDefault(),e.stopImmediatePropagation();var a=$(this),t=$(a).data("modal");$(t).parents(".overlay").addClass("open"),setTimeout(function(){$(t).addClass("open")},350),$(document).on("touchend || click",function(e){var a=$(e.target);$(a).hasClass("overlay")&&($(a).find(".modal").each(function(){$(this).removeClass("open")}),setTimeout(function(){$(a).removeClass("open")},350))})});var loginStatus;$(".close-modal").on("touchend || click",function(e){e.preventDefault(),e.stopImmediatePropagation();var a=$(this),t=$(a).data("modal"),o="username=hafiz&password=runaway",s=new XMLHttpRequest;s.withCredentials=!0,s.addEventListener("readystatechange",function(){if(4===this.readyState){console.log(this.responseText);var e=JSON.parse(this.responseText);if(loginStatus=e.error,0==loginStatus){$(t).removeClass("open"),setTimeout(function(){$(t).parents(".overlay").removeClass("open")},350);var a={async:!0,crossDomain:!0,url:"https://guarded-peak-98230.herokuapp.com/getfriends",method:"POST",xhrFields:{withCredentials:!0},data:{}};$.ajax(a).done(function(e){console.log(e)}),window.location.href="./map"}else 1==loginStatus?($("#login-status").text("Wrong password").addClass("fade-out-opacity"),setTimeout(function(){$("#login-status").removeClass("fade-out-opacity")},2e3)):2==loginStatus?($("#login-status").text("User not found").addClass("fade-out-opacity"),setTimeout(function(){$("#login-status").removeClass("fade-out-opacity")},2e3)):($("#login-status").text("Incorrect Parameters").addClass("fade-out-opacity"),setTimeout(function(){$("#login-status").removeClass("fade-out-opacity")},2e3)),$("#login-username").val("").val(""),$("#login-password").val("").val(""),$("#login-note-button").addClass("disabled").css("cursor","default")}}),s.open("POST","https://guarded-peak-98230.herokuapp.com/signin"),s.setRequestHeader("content-type","application/x-www-form-urlencoded"),s.setRequestHeader("cache-control","no-cache"),s.setRequestHeader("postman-token","7da05338-bfa7-5dfd-de8e-24b76645d69f"),s.send(o)}),$(document).keyup(function(e){13==e.which&&$("#modal1").hasClass("open")&&$(".close-modal").click(),""!=$("#login-username").val()&&""!=$("#login-password").val()?$("#login-note-button").removeClass("disabled").css("cursor","pointer"):$("#login-note-button").addClass("disabled").css("cursor","default")});var validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},validateName=function(e){return/^[a-zA-Z]+$/.test(e)},validateUserName=function(e){return/^[a-zA-Z0-9.-]+$/.test(e)},validatePhone=function(e){return/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/.test(e)};
